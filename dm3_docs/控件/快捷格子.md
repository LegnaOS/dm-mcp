# 快捷格子

快捷格子中可以拖放技能道具两种组件，通常配合快捷键使用。

| 名称 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| 类型 | 文本 | true | 固定值： 快捷格子 表示这是一个快捷格子控件 |
| 名称 | 文本 | true | 窗口中唯一标识 |
| x | 整数 | false | 默认显示坐标x |
| y | 整数 | false | 默认显示坐标y |
| 格子宽度 | 整数 | false | |
| 格子高度 | 整数 | false | |
| 底图 | 文本 | false | 资源标识 |
| 限制类型 | 文本 | false | "道具"或"技能",不配置表示不限制 |
| 限制分类 | 文本 | false | 限制道具时有效 |
| 限制子类 | 文本 | false | 限制道具时有效 |
| 快捷键 | 整数 | false | |
| 附加 | table | false | 自定义变量 |
| 默认可视 | 逻辑 | false | 默认是否显示 |
| 系统事件 | table | false | |

```
{
 名称 = "快捷格子1",
 类型 = "快捷格子",
 x = 60,
 y = 60,
 格子宽度 = 32,
 格子高度 = 32,
 快捷键 = 85
},

```

## 属性

### 可视

- 类型：逻辑
- 读写：读写
- 说明：是否显示控件

### 父窗口

- 类型：窗口对象
- 读写：只读
- 说明：控件的父窗口对象

### 名称

- 类型：文本
- 读写：只读
- 说明：控件的名称。

### 次序

- 类型：数值
- 读写：读写
- 说明：动态改变控件的显示层级，值越大越先显示。

### 道具

- 类型：道具对象
- 读写：读写
- 说明：如果格子中有道具返回道具对象,设置道具时只能设置已经在包裹格子中的道具。

```
local 快捷物品 = 按钮对象.父窗口.快捷格子1.道具
if (快捷物品) then
 if(快捷物品.冷却进度 < 100) then
 return
 end
 快捷物品.使用()
end

--===========================================================
local 道具 = 引擎.窗口.角色窗口.角色包裹.取出物品(2,7)
按钮对象.父窗口.快捷格子1.道具 = 道具

```

### 技能

- 类型：文本
- 读写：读写
- 说明：设置技能时,必须游戏中已经存在包含此技能的技能格子，否则无法设置。

```
引擎.窗口.底部UI.快捷格子2.技能="雷电术"

```

### 绑定角色

- 类型：整数
- 读写：只读
- 说明：如果有技能,那么返回来源格子的绑定角色ID。

### 附加

- 类型：table
- 读写：读写
- 说明：读写控件的附加信息。

## 系统事件

### 🔹 更新

- 快捷格子中对象发生放入或者移出时触发
- 被移出时类型和名称都是nil

| 回调参数 | 类型 | 说明描述 |
| --- | --- | --- |
| 当前格子 | 快捷格子对象 | |
| 对象类型 | nil/文本 | nil 或 "道具" 或 "技能" |
| 对象名称 | nil/文本 | |

## 示例

```
系统事件 = {
 更新 = function(快捷格子,对象类型,对象名称)
 if(对象类型) then
 调试输出(对象类型,对象名称)
 end
 end
}

```

### 🔹 触发

- 按下快捷键或者右键点击格子时触发
- 返回false拦截使用

| 回调参数 | 类型 | 说明描述 |
| --- | --- | --- |
| 当前格子 | 快捷格子对象 | |

## 示例

```
系统事件 = {
 触发 = function(格子对象)
 调试输出("触发",格子对象.技能,格子对象.道具)
 return false
 end
}

```
