# 技能格子

技能格子填入技能，绑定角色后会自动同步角色当前技能状态。

| 名称 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| 类型 | 文本 | true | 固定值： 技能格子 表示这是一个技能格子控件 |
| 名称 | 文本 | true | 窗口中唯一标识 |
| x | 整数 | false | 默认显示坐标x |
| y | 整数 | false | 默认显示坐标y |
| 格子宽度 | 整数 | false | |
| 格子高度 | 整数 | false | |
| 底图 | 文本 | false | 资源标识 |
| 技能 | 文本 | false | 格子中的技能名称 |
| 复制模式 | 逻辑 | false | 鼠标拿起时,格子技能不消失 |
| 禁止放入 | 逻辑 | false | |
| 禁止拿起 | 逻辑 | false | |
| 绑定角色 | 整数 | false | 0：主角 |
| 快捷键 | 整数 | false | |
| 附加 | table | false | 自定义变量 |
| 禁止存档 | 逻辑 | false | 默认：false |
| 默认可视 | 逻辑 | false | 默认是否显示 |
| 系统事件 | table | false | |

```
{
 名称 = "技能格子1",
 类型 = "技能格子",
 x = 18,
 y = 50,
 格子宽度 = 36,
 格子高度 = 36,
 复制模式 = true,
 禁止放入 = true,
 禁止拿起 = false,
 绑定角色 = 0,
 技能 = "血影刀法"
},

```

## 属性

### 可视

- 类型：逻辑
- 读写：读写
- 说明：是否显示控件

### 父窗口

- 类型：窗口对象
- 读写：只读
- 说明：控件的父窗口对象

### 名称

- 类型：文本
- 读写：只读
- 说明：控件的名称。

```
调试输出(技能格子1.名称)

```

### 次序

- 类型：数值
- 读写：读写
- 说明：动态改变控件的显示层级，值越大越先显示。

### 技能

- 类型：文本
- 读写：读写
- 说明：取出或修改格子中的技能

```
{
 名称 = "测试按钮",
 类型 = "按钮",
 x = 50,
 y = 50,
 宽度 = 64,
 高度 = 30,
 标题 = "确定",
 系统事件 = {
 点击 = function(按钮对象)
 if (引擎.窗口.技能窗口.技能格子1.技能 == "雷电术") then
 引擎.窗口.技能窗口.技能格子1.技能 = "火球术"
 else
 引擎.窗口.技能窗口.技能格子1.技能 = "雷电术"
 end
 end
 }
},

```

### 禁止拿起

- 类型：逻辑
- 读写：读写
- 说明：鼠标是否可以拿起格子中的技能。

### 绑定角色

- 类型：整数
- 读写：只读
- 说明：取出配置项中设置的绑定角色ID。

### 进度

- 类型：整数
- 读写：读写
- 说明：改变技能遮罩进度,无绑定角色时有效。

### 附加

- 类型：table
- 读写：读写
- 说明：读写控件的附加信息。

## 系统事件

### 🔹 点击

- 左键点击时, 返回true释放技能同时拦截拿起。
- 右键点击时, 返回true释放技能。

| 回调参数 | 类型 | 说明描述 |
| --- | --- | --- |
| 当前格子 | 技能格子 | |
| 技能对象 | 技能对象/nil | 主角的技能对象 未学习：nil |
| 键值 | 整数 | `0:鼠标左键` `1:鼠标右键` |
| 功能键 | 整数 | `1：Ctrl` `2：Shift` `3：Alt` 是否处于按下状态 |

## 示例

```
系统事件 = {
	点击 = function(技能格子,技能对象,键值,功能键)
 if (技能对象) then
 调试输出("当前技能：" .. 技能对象.名称)
 else
 调试输出("未学习",技能格子.技能)
 return true
 end
	end,
}

```
