# SqliteDB

## 介绍

- Sqlite数据库组件。

```
local 组件配置 = {
 类型 = "Sqlite",
 名称 = "数据库",
 系统事件 = {
 创建 = function(db)
 end,
 }
}

return 组件配置

```

## 配置项

| 名称 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| 类型 | 文本 | true | 固定值： Sqlite 表示这是一个Sqlite组件 |
| 名称 | 文本 | true | 全局唯一标识 |
| 系统事件 | table | false | |

## 方法

### 打开

打开

说明：打开数据库。

参数名称 值的类型 是否必填 说明描述 数据库地址 文本 true 自动创建 逻辑 false 不存在时是否自动创建数据库文件 示例 `local 结果 = self.数据库对象.打开("game.db",true) -- 不存在时自动创建数据库文件`

调试输出(结果)

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否成功 | 逻辑 | |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 数据库地址 | 文本 | true | |
| 自动创建 | 逻辑 | false | 不存在时是否自动创建数据库文件 |

## 示例

```
local 结果 = self.数据库对象.打开("game.db",true) -- 不存在时自动创建数据库文件
调试输出(结果)

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否成功 | 逻辑 | |

### 执行

执行

说明：执行SQL语句。

参数名称 值的类型 是否必填 说明描述 sql语句 文本 true ... 不定参数 false 匹配sql语句变量值 示例 `for n=1,20 do`

 local 名称 = os.uuid()
 local 等级 = 1 + math.random(10)
 local 金币 = math.random(10000)
 local 结果 = self.数据库对象.执行("INSERT INTO 测试表 (名称,等级,金币) VALUES (?,?,?)",名称,等级,金币)
 调试输出(结果)
end

| 语句类型 | 返回值 | 说明描述 |
| --- | --- | --- |
| INSERT | 逻辑/整数 | 失败返回false 成功返回最后一次插入记录的行id |
| SELECT | 逻辑/整数 | 失败返回false 成功返回 table {} |
| UPDATE | 逻辑 | 失败返回false 成功返回 true |
| DELETE | 逻辑/整数 | 失败返回false 成功返回 影响行数 |
| 其他 | 逻辑 | 失败返回false 成功返回 true |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| sql语句 | 文本 | true | |
| ... | 不定参数 | false | 匹配sql语句变量值 |

## 示例

```
for n=1,20 do
 local 名称 = os.uuid()
 local 等级 = 1 + math.random(10)
 local 金币 = math.random(10000)
 local 结果 = self.数据库对象.执行("INSERT INTO 测试表 (名称,等级,金币) VALUES (?,?,?)",名称,等级,金币)
 调试输出(结果)
end

```

| 语句类型 | 返回值 | 说明描述 |
| --- | --- | --- |
| INSERT | 逻辑/整数 | 失败返回false 成功返回最后一次插入记录的行id |
| SELECT | 逻辑/整数 | 失败返回false 成功返回 table {} |
| UPDATE | 逻辑 | 失败返回false 成功返回 true |
| DELETE | 逻辑/整数 | 失败返回false 成功返回 影响行数 |
| 其他 | 逻辑 | 失败返回false 成功返回 true |

## 系统事件

### 🔹 创建

创建时触发

| 回调参数 | 类型 | 说明描述 |
| --- | --- | --- |
| db | Sqlite对象 | |

## 示例

```
系统事件 = {
 创建 = function(数据库对象)

 end,
}

```
