# 自定义组件

## 属性

| 名称 | 权限 | 类型 | 说明 |
| --- | --- | --- | --- |
| 名称 | 只读 | 文本 | |
| 类型 | 只读 | 文本 | 组件的类型。 |
| 父窗口 | 只读 | 窗口对象 | |
| 父节点 | 只读 | 组件对象 | 组件当前的父节点对象 |
| 焦点节点 | 只读 | 组件对象 | 当前鼠标焦点节点对象 |
| 可视 | 读写 | 逻辑 | 是否显示组件 |
| x | 读写 | 整数 | |
| y | 读写 | 整数 | |
| 宽度 | 读写 | 整数 | |
| 高度 | 读写 | 整数 | |
| 背景色 | 读写 | RGBA | 组件的背景色。 |
| 边框色 | 读写 | RGBA | 组件的边框色。 |
| 边框宽度 | 读写 | 整数 | 组件的边框宽度。 |
| 水平缩放 | 读写 | 小数 | |
| 垂直缩放 | 读写 | 小数 | |
| 次序 | 读写 | 整数 | 在父节点上的显示次序,值越大越先显示 |
| 透明度 | 读写 | 小数 | 取值范围：0-1 |
| 角度 | 读写 | 整数 | |

## 方法

### 添加节点

添加节点

说明：在当前组件上添加一个节点。

参数名称 值的类型 是否必填 说明描述 组件配置 table true 示例 `self.场景框.添加节点(`

 {
 名称 = "怪物",
 类型 = "卡牌角色",
 x = 500,
 y = 200,
 图片 = "半兽人勇士",
 标题 = "半兽人勇士",
 血量 = 4,
 锚点x = 0.5,
 锚点y = 0.5,
 阵营 = -1,
 }
)

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 组件对象 | 对象对象 / nil | 失败返回 nil |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 组件配置 | table | true | |

## 示例

```
self.场景框.添加节点(
 {
 名称 = "怪物",
 类型 = "卡牌角色",
 x = 500,
 y = 200,
 图片 = "半兽人勇士",
 标题 = "半兽人勇士",
 血量 = 4,
 锚点x = 0.5,
 锚点y = 0.5,
 阵营 = -1,
 }
)

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 组件对象 | 对象对象 / nil | 失败返回 nil |

### 取出节点

取出节点

说明：从名称,或者从id取出子节点。

参数名称 值的类型 是否必填 说明描述 组件名称 文本/整数/nil false 不填表示取出全部子节点,kv table 示例 `local 卡牌背景 = 本次焦点.取出节点("背景")`

卡牌背景.混合模式 = 1

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 组件对象 | 对象 / 对象 {kv} / nil | 取出失败返回 nil |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 组件名称 | 文本/整数/nil | false | 不填表示取出全部子节点,kv table |

## 示例

```
local 卡牌背景 = 本次焦点.取出节点("背景")
卡牌背景.混合模式 = 1

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 组件对象 | 对象 / 对象 {kv} / nil | 取出失败返回 nil |

### 清除节点

清除节点

说明：清除节点。

参数名称 值的类型 是否必填 说明描述 组件名称 文本/组件对象/nil false 不填表示清空所有 如果是文本型名称,会清空所有同名节点。 示例 `self.场景框.清除节点()`

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否成功 | 逻辑 | |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 组件名称 | 文本/组件对象/nil | false | 不填表示清空所有 如果是文本型名称,会清空所有同名节点。 |

## 示例

```
self.场景框.清除节点()

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否成功 | 逻辑 | |

### 销毁

销毁

说明：销毁当前组件。

示例 `组件对象.销毁() `

## 示例

```
组件对象.销毁()

```

### 加入事件

加入事件

说明：往组件中加入一个自定义事件。

参数名称 值的类型 是否必填 说明描述 事件名称 文本 true 触发的事件名称 附加信息 table false 事件触发时可以取出 延迟时间 数值 false 延迟执行 自动销毁 逻辑 false 是否只执行一次，默认：true 示例 `组件对象.加入事件("倒计时",{计次=10},1000,false)`

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 事件名称 | 文本 | true | 触发的事件名称 |
| 附加信息 | table | false | 事件触发时可以取出 |
| 延迟时间 | 数值 | false | 延迟执行 |
| 自动销毁 | 逻辑 | false | 是否只执行一次，默认：true |

## 示例

```
组件对象.加入事件("倒计时",{计次=10},1000,false)

```

### 删除事件

删除事件

说明：删除指定自定义事件。

参数名称 值的类型 是否必填 说明描述 事件名称 文本 true 示例 ``

系统事件 = {

 倒计时 = function (组件对象,tbl,dt,time)
 tbl.计次 = tbl.计次 - 1
 if (tbl.计次 == 0) then
 组件对象.删除事件("倒计时")
 调试输出("起飞！")
 return
 end
 调试输出("倒计时 " .. tbl.计次 .. "秒")
 end,
}

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 事件名称 | 文本 | true | |

## 示例

```

系统事件 = {

 倒计时 = function (组件对象,tbl,dt,time)
 tbl.计次 = tbl.计次 - 1
 if (tbl.计次 == 0) then
 组件对象.删除事件("倒计时")
 调试输出("起飞！")
 return
 end
 调试输出("倒计时 " .. tbl.计次 .. "秒")
 end,
}

```
