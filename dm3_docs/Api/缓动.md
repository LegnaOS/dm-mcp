# 缓动

提示

缓动对象通过引擎.创建缓动创建。

## 方法

### to

to

说明：缓动到目标值。

参数名称 值的类型 是否必填 说明描述 目标对象 table true 被缓动的对象 属性列表 table true 要缓动到的目标属性 完成时间 数值 true 多少毫秒内完成缓动 onUpdate function false 属性变化时回调进度 回调参数(k[属性名],v[当前值],over[完成]) 缓动类型 文本 false 二次方_in 二次方_out 二次方_inOut 三次方_in 三次方_out 三次方_inOut 四次方_in 四次方_out 四次方_inOut 五次方_in 五次方_out 五次方_inOut 正弦曲线_in 正弦曲线_out 正弦曲线_inOut 指数曲线_in 指数曲线_out 指数曲线_inOut 圆形曲线_in 圆形曲线_out 圆形曲线_inOut 曲线衰减_in 曲线衰减_out 曲线衰减_inOut 后移衰减_in 后移衰减_out 后移衰减_inOut 反弹衰减_in 反弹衰减_out 反弹衰减_inOut 延迟执行 数值 false 单位：毫秒 示例 `引擎.创建缓动().to(引擎.窗口.底部UI.地图按钮,{y=-100,x=100},300);`

local 小鸡 = {吃饭进度=0}
引擎.创建缓动().to(小鸡,{吃饭进度=100},1000,function(k,v,over)
 调试输出(k,v,over)
end);

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 目标对象 | table | true | 被缓动的对象 |
| 属性列表 | table | true | 要缓动到的目标属性 |
| 完成时间 | 数值 | true | 多少毫秒内完成缓动 |
| onUpdate | function | false | 属性变化时回调进度 回调参数(k[属性名],v[当前值],over[完成]) |
| 缓动类型 | 文本 | false | 二次方_in 二次方_out 二次方_inOut 三次方_in 三次方_out 三次方_inOut 四次方_in 四次方_out 四次方_inOut 五次方_in 五次方_out 五次方_inOut 正弦曲线_in 正弦曲线_out 正弦曲线_inOut 指数曲线_in 指数曲线_out 指数曲线_inOut 圆形曲线_in 圆形曲线_out 圆形曲线_inOut 曲线衰减_in 曲线衰减_out 曲线衰减_inOut 后移衰减_in 后移衰减_out 后移衰减_inOut 反弹衰减_in 反弹衰减_out 反弹衰减_inOut |
| 延迟执行 | 数值 | false | 单位：毫秒 |

| 二次方_in | 二次方_out | 二次方_inOut |
| --- | --- | --- |
| 三次方_in | 三次方_out | 三次方_inOut |
| 四次方_in | 四次方_out | 四次方_inOut |
| 五次方_in | 五次方_out | 五次方_inOut |
| 正弦曲线_in | 正弦曲线_out | 正弦曲线_inOut |
| 指数曲线_in | 指数曲线_out | 指数曲线_inOut |
| 圆形曲线_in | 圆形曲线_out | 圆形曲线_inOut |
| 曲线衰减_in | 曲线衰减_out | 曲线衰减_inOut |
| 后移衰减_in | 后移衰减_out | 后移衰减_inOut |
| 反弹衰减_in | 反弹衰减_out | 反弹衰减_inOut |

## 示例

```
引擎.创建缓动().to(引擎.窗口.底部UI.地图按钮,{y=-100,x=100},300);

local 小鸡 = {吃饭进度=0}
引擎.创建缓动().to(小鸡,{吃饭进度=100},1000,function(k,v,over)
 调试输出(k,v,over)
end);

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

### by

by

说明：在当前属性值基础上,相对缓动到目标值。

参数名称 值的类型 是否必填 说明描述 目标对象 table true 被缓动的对象 属性列表 table true 要缓动到的目标属性 完成时间 数值 true 多少毫秒内完成缓动 onUpdate function false 属性变化时回调进度 回调参数(k[属性名],v[当前值],over[完成]) 缓动类型 文本 false 二次方_in 二次方_out 二次方_inOut 三次方_in 三次方_out 三次方_inOut 四次方_in 四次方_out 四次方_inOut 五次方_in 五次方_out 五次方_inOut 正弦曲线_in 正弦曲线_out 正弦曲线_inOut 指数曲线_in 指数曲线_out 指数曲线_inOut 圆形曲线_in 圆形曲线_out 圆形曲线_inOut 曲线衰减_in 曲线衰减_out 曲线衰减_inOut 后移衰减_in 后移衰减_out 后移衰减_inOut 反弹衰减_in 反弹衰减_out 反弹衰减_inOut 延迟执行 数值 false 单位：毫秒 示例 `引擎.创建缓动().by(引擎.窗口.底部UI.地图按钮,{y=-50},300,nil,"后移衰减_out") -- 本次调用在当前的y坐标基础上 上移50`

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 目标对象 | table | true | 被缓动的对象 |
| 属性列表 | table | true | 要缓动到的目标属性 |
| 完成时间 | 数值 | true | 多少毫秒内完成缓动 |
| onUpdate | function | false | 属性变化时回调进度 回调参数(k[属性名],v[当前值],over[完成]) |
| 缓动类型 | 文本 | false | 二次方_in 二次方_out 二次方_inOut 三次方_in 三次方_out 三次方_inOut 四次方_in 四次方_out 四次方_inOut 五次方_in 五次方_out 五次方_inOut 正弦曲线_in 正弦曲线_out 正弦曲线_inOut 指数曲线_in 指数曲线_out 指数曲线_inOut 圆形曲线_in 圆形曲线_out 圆形曲线_inOut 曲线衰减_in 曲线衰减_out 曲线衰减_inOut 后移衰减_in 后移衰减_out 后移衰减_inOut 反弹衰减_in 反弹衰减_out 反弹衰减_inOut |
| 延迟执行 | 数值 | false | 单位：毫秒 |

| 二次方_in | 二次方_out | 二次方_inOut |
| --- | --- | --- |
| 三次方_in | 三次方_out | 三次方_inOut |
| 四次方_in | 四次方_out | 四次方_inOut |
| 五次方_in | 五次方_out | 五次方_inOut |
| 正弦曲线_in | 正弦曲线_out | 正弦曲线_inOut |
| 指数曲线_in | 指数曲线_out | 指数曲线_inOut |
| 圆形曲线_in | 圆形曲线_out | 圆形曲线_inOut |
| 曲线衰减_in | 曲线衰减_out | 曲线衰减_inOut |
| 后移衰减_in | 后移衰减_out | 后移衰减_inOut |
| 反弹衰减_in | 反弹衰减_out | 反弹衰减_inOut |

## 示例

```
引擎.创建缓动().by(引擎.窗口.底部UI.地图按钮,{y=-50},300,nil,"后移衰减_out") -- 本次调用在当前的y坐标基础上 上移50

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

### wait

wait

说明：延时等待。

参数名称 值的类型 是否必填 说明描述 等待时间 整数 false 单位：毫秒 示例 `引擎.创建缓动()`

.by(引擎.窗口.底部UI.地图按钮,{y=-50},300,nil,"后移衰减_out")
.wait(1000)
.by(引擎.窗口.底部UI.地图按钮,{y=50},300,nil,"后移衰减_in")

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 等待时间 | 整数 | false | 单位：毫秒 |

## 示例

```
引擎.创建缓动()
.by(引擎.窗口.底部UI.地图按钮,{y=-50},300,nil,"后移衰减_out")
.wait(1000)
.by(引擎.窗口.底部UI.地图按钮,{y=50},300,nil,"后移衰减_in")

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

### call

call

说明：调用自定义函数。

参数名称 值的类型 是否必填 说明描述 函数 function true 名称 类型 说明描述 属性 table {dt [帧时间],time [函数运行时间],over [结束开关]} 附加 通用 附加 通用 false 会传递到函数中去 示例 `引擎.创建缓动()`

.by(引擎.窗口.底部UI.地图按钮,{y=-150},300,nil,"后移衰减_out")
.call(function(属性,按钮)
 if (属性.定时器 == nil) then
 属性.定时器 = 0
 属性.进度 = 0
 按钮.标题 = "起飞"
 end
 属性.定时器 = 属性.定时器 + 属性.dt

 if (属性.定时器 &gt;= 1000) then
 属性.定时器 = 0
 属性.进度 = 属性.进度 + 1
 if (属性.进度 &lt; 4) then
 引擎.屏幕提示("倒计时 " .. 属性.进度)

 elseif (属性.进度 == 4) then
 引擎.屏幕提示("准备降落")
 按钮.标题 = "降落"
 属性.over = true -- 结束函数的一种方式
 --	return true	-- 结束函数的另一种方式
 end
 end

end,引擎.窗口.底部UI.地图按钮)
.by(引擎.窗口.底部UI.地图按钮,{y=150},300,nil,"后移衰减_in")
.call(function(属性,按钮)
 按钮.标题 = "挂机"
 return true
end,引擎.窗口.底部UI.地图按钮)

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 函数 | function | true | 名称 类型 说明描述 属性 table {dt [帧时间],time [函数运行时间],over [结束开关]} 附加 通用 |
| 附加 | 通用 | false | 会传递到函数中去 |

| 名称 | 类型 | 说明描述 |
| --- | --- | --- |
| 属性 | table | {dt [帧时间],time [函数运行时间],over [结束开关]} |
| 附加 | 通用 | |

## 示例

```
引擎.创建缓动()
.by(引擎.窗口.底部UI.地图按钮,{y=-150},300,nil,"后移衰减_out")
.call(function(属性,按钮)
 if (属性.定时器 == nil) then
 属性.定时器 = 0
 属性.进度 = 0
 按钮.标题 = "起飞"
 end
 属性.定时器 = 属性.定时器 + 属性.dt

 if (属性.定时器 >= 1000) then
 属性.定时器 = 0
 属性.进度 = 属性.进度 + 1
 if (属性.进度 < 4) then
 引擎.屏幕提示("倒计时 " .. 属性.进度)

 elseif (属性.进度 == 4) then
 引擎.屏幕提示("准备降落")
 按钮.标题 = "降落"
 属性.over = true -- 结束函数的一种方式
 --	return true	-- 结束函数的另一种方式
 end
 end

end,引擎.窗口.底部UI.地图按钮)
.by(引擎.窗口.底部UI.地图按钮,{y=150},300,nil,"后移衰减_in")
.call(function(属性,按钮)
 按钮.标题 = "挂机"
 return true
end,引擎.窗口.底部UI.地图按钮)

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

提示

通过系统回调参数中的[over],或者返回值 true都可以结束函数运行。

### jump

jump

说明：跳跃到指定位置。

参数名称 值的类型 是否必填 说明描述 目标对象 table true 发生跳跃的对象 x 整数 true y 整数 true 速度 整数 false 默认：500 高度 数值 false 默认：30 相对跳跃 逻辑 false 默认：false 重力效果 逻辑 false 默认：false 旋转效果 逻辑 false 默认：false 示例 `local 按钮对象 = 引擎.窗口.底部UI.地图按钮`

引擎.创建缓动().jump(按钮对象,-80,-20,600,300,true)

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 目标对象 | table | true | 发生跳跃的对象 |
| x | 整数 | true | |
| y | 整数 | true | |
| 速度 | 整数 | false | 默认：500 |
| 高度 | 数值 | false | 默认：30 |
| 相对跳跃 | 逻辑 | false | 默认：false |
| 重力效果 | 逻辑 | false | 默认：false |
| 旋转效果 | 逻辑 | false | 默认：false |

## 示例

```
local 按钮对象 = 引擎.窗口.底部UI.地图按钮
引擎.创建缓动().jump(按钮对象,-80,-20,600,300,true)

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 缓动对象 | 缓动对象 | 返回当前正在执行的缓动对象 |

### stop

stop

说明：立即结束缓动。

参数名称 值的类型 是否必填 说明描述 销毁 逻辑 false 非自动销毁的缓动对象可以在这里设置参数true,销毁 示例 `local 按钮对象 = 引擎.窗口.底部UI.地图按钮`

if (按钮对象.附加.缓动) then -- 已经有缓动了
	按钮对象.附加.缓动.stop()
	按钮对象.x = 610
	按钮对象.y = 40
end
按钮对象.附加.缓动 = 引擎.创建缓动().jump(按钮对象,-80,-20,600,300,true).jump(按钮对象,80,20,600,300,true)

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 销毁 | 逻辑 | false | 非自动销毁的缓动对象可以在这里设置参数true,销毁 |

## 示例

```
local 按钮对象 = 引擎.窗口.底部UI.地图按钮
if (按钮对象.附加.缓动) then -- 已经有缓动了
	按钮对象.附加.缓动.stop()
	按钮对象.x = 610
	按钮对象.y = 40
end
按钮对象.附加.缓动 = 引擎.创建缓动().jump(按钮对象,-80,-20,600,300,true).jump(按钮对象,80,20,600,300,true)

```

### over

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否完成 | 逻辑 | |

```
调试输出(缓动对象.over())

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 是否完成 | 逻辑 | |
