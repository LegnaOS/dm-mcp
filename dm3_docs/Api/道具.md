# 道具

## 介绍

道具对象的属性在脚本中可以随时随地修改。各个属性的说明参考道具配置项

## 属性

| 名称 | 类型 | 说明 |
| --- | --- | --- |
| 名称 | 文本 | |
| 显示名 | 文本 | |
| 颜色 | RGBA | |
| 图标 | 文本 | |
| 气泡提示 | 文本 | |
| 分类 | 文本 | |
| 子类 | 文本 | |
| 细类 | 文本 | |
| 最大叠加 | 整数 | |
| 冷却进度 | 数值 | `0-100` 100:表示冷却完成 |
| 格子效果 | table | |
| 地面效果 | table | |
| 消失间隔 | 整数 | 道具掉落到地面后多少毫秒后消失,物品掉落前修改有效 |
| 外观 | table | |
| 内观 | table | |
| 自动拾取 | table | |
| 数量 | 整数 | 数量为0 道具销毁 |
| 等级 | 整数 | |
| hp mp maxhp maxmp ... | 整数 | 属性表 |
| 套装 | table | 如果是套装部件可以取出套装状态 成员 类型 说明 名称 文本 同App.lua套装配置项 激活数量 整数 部件 table {} { {名称,数量}, {名称,数量}, ... } 效果 table {} 同App.lua套装配置项 |

| 成员 | 类型 | 说明 |
| --- | --- | --- |
| 名称 | 文本 | 同App.lua套装配置项 |
| 激活数量 | 整数 | |
| 部件 | table {} | { {名称,数量}, {名称,数量}, ... } |
| 效果 | table {} | 同App.lua套装配置项 |

```
系统事件 = {
 创建 = function(道具对象,附加)
 道具对象.地面效果 = {{"掉宝特效,地表选中,0.6",0},{"掉宝特效,光柱特效," .. math.random(3,8)/10,1}}
 end,
},

```

提示

自定的属性直接获得，例如：自定义属性中有攻击，那么属性访问道具对象.攻击。

## 方法

### 使用

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 成功 | 逻辑 | |

```
local 道具对象 = 引擎.窗口.角色窗口.角色包裹.取出物品(1,1)
if (道具对象) then
 道具对象.使用()
end

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 成功 | 逻辑 | |

掉落

说明：当这个道具处于角色对象的装备中时才可以掉落到地图上。

示例 `if (引擎.地图.主角.装备.武器) then 引擎.地图.主角.装备.武器.掉落() end `

## 示例

```
if (引擎.地图.主角.装备.武器) then
 引擎.地图.主角.装备.武器.掉落()
end

```

### 刷新

刷新

说明：主动触发气泡提示变化。

示例 `道具对象.刷新() -- 会触发App.lua中[道具气泡提示]事件 `

## 示例

```
道具对象.刷新() -- 会触发App.lua中[道具气泡提示]事件

```

### 显示气泡

显示气泡

说明：主动显示道具气泡提示。

参数名称 值的类型 是否必填 说明描述 x 整数 true 屏幕坐标x y 整数 true 屏幕坐标y 水平偏移 整数 false 坐标x < 1/2屏幕时的偏移量 示例 `{`

 名称 = "武器包围盒",
 类型 = "图片框",
 x = 12,
 y = 48,
 宽度 = 100,
 高度 = 158,
 背景色 = 0,
 边框宽度 = 0,
 鼠标事件 = true,
 边框色 = RGBA(255,255,255,255),
 显示方式 = 0,
 系统事件 = {
 焦点 = function(图片框,焦点状态)
 if (焦点状态) then
 local 主角对象 = 引擎.地图.主角
 local 道具对象 = 主角对象.装备["武器"]
 if (道具对象) then
 local x = 图片框.父窗口.x + 图片框.x + 50
 local y = 图片框.父窗口.y + 图片框.y + 60
 道具对象.显示气泡(x,y)
 end
 end
 end,
 点击 = function(图片框)
 local 武器格子 = 图片框.父窗口.主角武器
 武器格子.点击()
 end,
 }
},

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| x | 整数 | true | 屏幕坐标x |
| y | 整数 | true | 屏幕坐标y |
| 水平偏移 | 整数 | false | 坐标x < 1/2屏幕时的偏移量 |

## 示例

```
{
 名称 = "武器包围盒",
 类型 = "图片框",
 x = 12,
 y = 48,
 宽度 = 100,
 高度 = 158,
 背景色 = 0,
 边框宽度 = 0,
 鼠标事件 = true,
 边框色 = RGBA(255,255,255,255),
 显示方式 = 0,
 系统事件 = {
 焦点 = function(图片框,焦点状态)
 if (焦点状态) then
 local 主角对象 = 引擎.地图.主角
 local 道具对象 = 主角对象.装备["武器"]
 if (道具对象) then
 local x = 图片框.父窗口.x + 图片框.x + 50
 local y = 图片框.父窗口.y + 图片框.y + 60
 道具对象.显示气泡(x,y)
 end
 end
 end,
 点击 = function(图片框)
 local 武器格子 = 图片框.父窗口.主角武器
 武器格子.点击()
 end,
 }
},

```

### 取出节点

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 对象/nil | 节点对象 | 取出失败返回nil |

```
local 图标1 = 道具对象.取出节点("个性图标")
图标1.销毁()

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 对象/nil | 节点对象 | 取出失败返回nil |
