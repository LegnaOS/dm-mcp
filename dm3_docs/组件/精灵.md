# 精灵

## 配置项

| 名称 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| 类型 | 文本 | true | 固定值： 精灵 表示这是一个精灵组件 |
| 名称 | 文本 | true | 节点中唯一标识 |
| x | 整数 | false | 默认显示坐标x |
| y | 整数 | false | 默认显示坐标y |
| 锚点x | 小数 | false | |
| 锚点y | 小数 | false | |
| 宽度 | 整数 | false | |
| 高度 | 整数 | false | |
| 角度 | 整数 | false | |
| 图片 | 文本 | false | 图片类型的资源标识 |
| 颜色 | RGBA | false | 默认颜色 RGBA(255,255,255,255) |
| 九宫 | table | false | |
| 水平缩放 | 数值 | false | |
| 垂直缩放 | 数值 | false | |
| 混合模式 | 整数 | false | 可选 0-3 4种效果 |
| 显示方式 | 整数 | false | 0：缩放 1：自适应居中 |
| 默认可视 | 逻辑 | false | 默认是否显示 |
| 气泡提示 | 文本 | false | |
| 气泡皮肤 | 文本 | false | |
| 鼠标事件 | 逻辑 | false | 是否接收鼠标事件 |

```
{
 名称 = "关卡头像",
 类型 = "精灵",
 默认可视 = true,
 x = 17,
 y = 17,
 锚点x = 0.5,
 锚点y = 0.5,
 水平缩放 = 0.5,
 垂直缩放 = 0.5,
 图片 = "_关卡项目_头像_1",
 鼠标事件 = true, -- 是否接收鼠标事件
},

```

## 属性

### 可视

- 类型：逻辑
- 说明：是否显示组件

### 名称

- 类型：文本
- 读写：只读
- 说明：组件的名称。

### 类型

- 类型：文本
- 读写：只读
- 说明：组件的类型。

### x

- 类型：整数
- 读写：读写
- 说明：组件的x坐标。

### y

- 类型：整数
- 读写：读写
- 说明：组件的y坐标。

### 宽度

- 类型：整数
- 读写：读写
- 说明：组件的宽度。

### 高度

- 类型：整数
- 读写：读写
- 说明：组件的高度。

### 角度

- 类型：整数
- 读写：读写
- 说明：组件的角度。

### 图片

- 类型：文本
- 读写：读写
- 说明：修改精灵图片。

### 混合模式

- 类型：整数
- 读写：读写
- 说明：读写混合模式。

### 颜色

- 类型：RGBA
- 读写：读写
- 说明：修改精灵颜色。

### 气泡提示

- 类型：文本
- 读写：读写
- 说明：读写气泡提示。

### 鼠标焦点

- 类型：逻辑
- 读写：只读
- 说明：组件当前是否有鼠标焦点。

### 鼠标坐标

- 类型：table {x,y}
- 读写：只读
- 说明：组件当前的鼠标坐标。

### 次序

- 类型：数值
- 读写：读写
- 说明：动态改变节点的显示顺序，值越大越先显示。

## 方法

### 闪烁

闪烁

说明：播放闪烁效果。

参数名称 值的类型 是否必填 说明描述 颜色值 RGBA true 持续时间 整数 false 单位：毫秒 默认：100 闪烁间隔 整数 false 单位：毫秒 默认：50 `描边模式时设置为0表示持续显示描边` 描边宽度 整数 false >0时，表示使用边框闪烁模式 默认：0 结束回调 function false 节点对象会作为回调参数返回 示例 `local 卡牌背景 = 本次焦点.取出节点("背景")`

卡牌背景.闪烁(RGBA(255,255,255,200))

local 图标节点 = 本次焦点.取出节点("图标")
图标节点.闪烁(RGBA(255,255,0,255),2000,500,4,function(图标)
 调试输出("闪烁结束")
end);

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 颜色值 | RGBA | true | |
| 持续时间 | 整数 | false | 单位：毫秒 默认：100 |
| 闪烁间隔 | 整数 | false | 单位：毫秒 默认：50 `描边模式时设置为0表示持续显示描边` |
| 描边宽度 | 整数 | false | >0时，表示使用边框闪烁模式 默认：0 |
| 结束回调 | function | false | 节点对象会作为回调参数返回 |

## 示例

```
local 卡牌背景 = 本次焦点.取出节点("背景")
卡牌背景.闪烁(RGBA(255,255,255,200))

local 图标节点 = 本次焦点.取出节点("图标")
图标节点.闪烁(RGBA(255,255,0,255),2000,500,4,function(图标)
 调试输出("闪烁结束")
end);

```

### 呼吸

呼吸

说明：呼吸动画效果。

参数名称 值的类型 是否必填 说明描述 持续时间 整数 false 单位：毫秒 默认：0 `0：停止呼吸` 呼吸频率 整数 false 单位：毫秒 默认：500 模式 整数 false `1：缩放` `2：透明度` 最小值 小数 false 默认：0.8 最大值 小数 false 默认：1.2 结束回调 function false 节点对象会作为回调参数返回 示例 `local 图标节点 = 本次焦点.取出节点("图标")`

图标节点.呼吸(6000,1000,1,0.7,0.9,function(节点)
 调试输出("呼吸结束")
end)

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 持续时间 | 整数 | false | 单位：毫秒 默认：0 `0：停止呼吸` |
| 呼吸频率 | 整数 | false | 单位：毫秒 默认：500 |
| 模式 | 整数 | false | `1：缩放` `2：透明度` |
| 最小值 | 小数 | false | 默认：0.8 |
| 最大值 | 小数 | false | 默认：1.2 |
| 结束回调 | function | false | 节点对象会作为回调参数返回 |

## 示例

```
local 图标节点 = 本次焦点.取出节点("图标")
图标节点.呼吸(6000,1000,1,0.7,0.9,function(节点)
 调试输出("呼吸结束")
end)

```

### 批量显示

批量显示

说明：传递一个显示配置数组进行批渲染。

参数名称 值的类型 是否必填 说明描述 信息表 table true 名称 值的类型 是否必填 说明描述 x 数值 true 显示坐标x y 数值 true 显示坐标y 纹理x 整数 true 纹理区域x 纹理y 整数 true 纹理区域x 纹理宽度 整数 true 纹理区域宽度 纹理高度 整数 true 纹理区域高度 显示宽度 整数 true 本次显示的宽度,可用于缩放效果 显示高度 整数 true 本次显示的高度,可用于缩放效果 颜色 RGBA true 角度 整数 false 锚点x 小数 false 锚点y 小数 false 示例 `local 颜色 = RGBA(255,255,255,128)`

local 精灵组件 = 按钮对象.父窗口.文本按钮1.取出节点("精灵图集")
精灵组件.批量显示({
 {0,0,130,84,66,66,66,66,颜色,60,0.5,0.5},
 {100,100,280,277,20,20,20,20,颜色},
 {150,150,130,84,66,66,33,33,颜色},
})

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| 信息表 | table | true | 名称 值的类型 是否必填 说明描述 x 数值 true 显示坐标x y 数值 true 显示坐标y 纹理x 整数 true 纹理区域x 纹理y 整数 true 纹理区域x 纹理宽度 整数 true 纹理区域宽度 纹理高度 整数 true 纹理区域高度 显示宽度 整数 true 本次显示的宽度,可用于缩放效果 显示高度 整数 true 本次显示的高度,可用于缩放效果 颜色 RGBA true 角度 整数 false 锚点x 小数 false 锚点y 小数 false |

| 名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| x | 数值 | true | 显示坐标x |
| y | 数值 | true | 显示坐标y |
| 纹理x | 整数 | true | 纹理区域x |
| 纹理y | 整数 | true | 纹理区域x |
| 纹理宽度 | 整数 | true | 纹理区域宽度 |
| 纹理高度 | 整数 | true | 纹理区域高度 |
| 显示宽度 | 整数 | true | 本次显示的宽度,可用于缩放效果 |
| 显示高度 | 整数 | true | 本次显示的高度,可用于缩放效果 |
| 颜色 | RGBA | true | |
| 角度 | 整数 | false | |
| 锚点x | 小数 | false | |
| 锚点y | 小数 | false | |

## 示例

```
local 颜色 = RGBA(255,255,255,128)
local 精灵组件 = 按钮对象.父窗口.文本按钮1.取出节点("精灵图集")
精灵组件.批量显示({
 {0,0,130,84,66,66,66,66,颜色,60,0.5,0.5},
 {100,100,280,277,20,20,20,20,颜色},
 {150,150,130,84,66,66,33,33,颜色},
})

```

### 显示气泡

显示气泡

说明：在当前节点上持久显示气泡提示。

参数名称 值的类型 是否必填 说明描述 x 整数/nil true 显示偏移x,nil表示取消持久显示 y 整数 true 显示偏移y 水平对齐 整数 false `0：左对齐` `1：居中对齐` `2：右对齐` 垂直对齐 整数 false `0：顶部对齐` `1：居中对齐` `2：底部对齐` 示例 `节点.气泡提示 = [[#z(140,0,1)`

#z(2,-12)#f(宋体14粗)#c(4008636159)短剑#z(0,10,1)
#p(默认皮肤|格子底图)#p(_道具图标|短剑,-44,0,42,42)#f(宋体12)#W#z(4,-42)
类型：武器
#W等级：1
#W限制：无
#z(0,0)
#W攻击 5
#W暴击 100

#z(0,0)#br(140)#H普普通通的短剑#z(0,2,1)]]

local 宽度,高度 = 节点.显示气泡(0,0)
调试输出(宽度,高度)

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 宽度 | 整数 | 气泡宽度 |
| 高度 | 整数 | 气泡高度 |

| 参数名称 | 值的类型 | 是否必填 | 说明描述 |
| --- | --- | --- | --- |
| x | 整数/nil | true | 显示偏移x,nil表示取消持久显示 |
| y | 整数 | true | 显示偏移y |
| 水平对齐 | 整数 | false | `0：左对齐` `1：居中对齐` `2：右对齐` |
| 垂直对齐 | 整数 | false | `0：顶部对齐` `1：居中对齐` `2：底部对齐` |

## 示例

```
节点.气泡提示 = [[#z(140,0,1)
#z(2,-12)#f(宋体14粗)#c(4008636159)短剑#z(0,10,1)
#p(默认皮肤|格子底图)#p(_道具图标|短剑,-44,0,42,42)#f(宋体12)#W#z(4,-42)
类型：武器
#W等级：1
#W限制：无
#z(0,0)
#W攻击 5
#W暴击 100

#z(0,0)#br(140)#H普普通通的短剑#z(0,2,1)]]

local 宽度,高度 = 节点.显示气泡(0,0)
调试输出(宽度,高度)

```

| 返回值 | 值的类型 | 说明描述 |
| --- | --- | --- |
| 宽度 | 整数 | 气泡宽度 |
| 高度 | 整数 | 气泡高度 |

### 销毁

销毁

说明：销毁当前组件。

示例 `本次焦点.销毁() `

## 示例

```
本次焦点.销毁()

```
